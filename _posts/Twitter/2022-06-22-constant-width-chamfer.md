---
title: Constant width chamfer
tags: SDF nTop Twitter
---

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">Following up from yesterday here&#39;s how to make a constant-width chamfer using implicit modeling. Images are from <a href="https://twitter.com/nTopology?ref_src=twsrc%5Etfw">@nTopology</a>. <br><br>(1/n) <a href="https://t.co/6k7BtKv3cP">pic.twitter.com/6k7BtKv3cP</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539764910103662592?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<!--more-->

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">Let&#39;s work in 2D so we can visualize the field. We will take two planes represented as signed distance fields (SDFs), and let&#39;s call those fields &quot;A&quot; and &quot;B&quot;.<br><br>Here&#39;s A, and B is it&#39;s mirror image across the vertical axis:<br><br>(2/n) <a href="https://t.co/htvjfd4FBx">pic.twitter.com/htvjfd4FBx</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539765690831458305?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">We will can intersect these together by taking the max of the fields. (Our sign convention is that inside is negative.)<br><br>This corner, A ∩ B, is what we want to chamfer. Note that this result is not an SDF, because the field extending up from the corner is sharp.<br><br>(3/n) <a href="https://t.co/9UsepToZPT">pic.twitter.com/9UsepToZPT</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539767614150418434?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">SDFs are more special than general implicits because their gradient has unit magnitude. The sum and difference of two unit vectors are perpendicular, as seen in the diagonals of the rhombus of the vectors.<br><br>Defining:<br>S = A + B<br>D = A - B<br><br>(4/n) <a href="https://t.co/21ielqTTX4">pic.twitter.com/21ielqTTX4</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539769956870529024?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">Here is A + B with A ∩ B overlaid above. Looks okay at first glance, but notice (left) that the spacing between the contours is wider than our original fields. It&#39;s gradient magnitude is not unity, but we can normalize the field by dividing by that magnitude (right).<br><br>(5/n) <a href="https://t.co/BJ5SwRPfxL">pic.twitter.com/BJ5SwRPfxL</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539773267438968835?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">To get a chamfer, we just need to offset our normalized A + B field inward and intersect again. This result produces a constant inset chamfer, where the width increases with dihedral angle between faces.<br><br>(6/n) <a href="https://t.co/YCDmpANN7h">pic.twitter.com/YCDmpANN7h</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539774307232088067?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">To convert to a constant width chamfer, one simply does some trig on the triangle to figure out what the inset should be based on the angle between the gradients. <br><br>Here&#39;s what that looks like in nTopology:<br>(7/n) <a href="https://t.co/SmFSH59ckC">pic.twitter.com/SmFSH59ckC</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539775565502234625?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">But what about asymmetric chamfers? One approach is to expand A + B into <br><br>A * t + B * (1 - t)<br><br>But it&#39;s not convenient for precise geometry. <br><br>(8/n)</p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539777572430561281?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">One can create a surface at an arbitrary angle Θ to the normalized S or D fields using<br><br>S * cos(Θ) + D * sin(Θ)<br><br>Algebraic geometers call this family of surfaces the &quot;pencil&quot; of their intersection curve. <br><br>With some more trig, any CAD-like chamfer is now in your control. <br><br>(9/n) <a href="https://t.co/5eA5MvAhlb">pic.twitter.com/5eA5MvAhlb</a></p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539778409374572551?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-theme="dark"><p lang="en" dir="ltr">That&#39;s the full story of implicit chamfers, as far as I can tell. <br><br>BTW, this is my first attempt to make a math tweet thread in the style of my heroes like <a href="https://twitter.com/keenanisalive?ref_src=twsrc%5Etfw">@keenanisalive</a> and <a href="https://twitter.com/johncarlosbaez?ref_src=twsrc%5Etfw">@johncarlosbaez</a> . Would very much appreciate feedback.<br><br>(10/n, n = 10)</p>&mdash; Blake Courter (@bcourter) <a href="https://twitter.com/bcourter/status/1539779326488576001?ref_src=twsrc%5Etfw">June 23, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>